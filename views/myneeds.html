<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>Need It</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/css/design.css" rel="stylesheet">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-tagsinput.css" rel="stylesheet">
    <script src="/js/jquery-1.8.3.min.js"></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="/js/jquery.ui.touch-punch.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap-tagsinput.min.js"></script>
      
    <script type="text/javascript">
      window.onload = function(){
        function getInfo(){
          $.getJSON("/users/"+$.cookie('email'), {}, function(user){
            if(!user || user.needs == []){
              document.getElementById('needs').style.visibility = 'hidden'
            }
            else {
              var container = document.getElementById('container')
              if(user.needs.length > 0){
                for(i = 0; i < user.needs.length; i++){
                  var div = document.createElement('div')
                  div.innerHTML = user.needs[i]
                  div.setAttribute('class', 'well')
                  container.appendChild(div)
                }
              }
              else container.style.visibility = 'hidden'

              var profil_button_div = document.getElementById('profil_button')
              var profil_button = document.createElement('button')
              profil_button.setAttribute('class', 'btn btn-default')
              profil_button.setAttribute('type', 'button')
              profil_button.innerHTML = 'Trades'
              profil_button.onclick = function() {
                window.location.href = '/trades'
              }
              profil_button_div.appendChild(profil_button)

              var trade_button_div = document.getElementById('trade_button')
              var trade_button = document.createElement('button')
              trade_button.setAttribute('class', 'btn btn-default')
              trade_button.setAttribute('type', 'button')
              trade_button.innerHTML = 'Profil'
              trade_button.onclick = function() {
                window.location.href = '/profil'
              }
              trade_button_div.appendChild(trade_button)
            }
          })
        }
        getInfo()
      }
    </script>
    
  </head>
  
<body class="mn_body">


<div class="landing">
  
  	<div class="container-fluid">
  		
  		<div class="row-fluid">
  			<div class="span2" id="trade_button"></div>
  			<div class="span7"></div>
  			<div class="span3" id="links"><div class="pull-right" id="profil_button">
        <a href="" onClick="return confirm('Are you sure you want to log out ?');"><i class="icon-off icon-white"></i></a></div></div>
  		</div>
  		
  		
  		<div class="row-fluid">
  			<div class="span6 offset3">
  				       <div class="page-header">
					    	<h1>I Need It </h1>
					    	<h4 id="punchline">All you need is love</h4>
					   </div>
					  				
  			</div>
  		</div>
  		
  		<br>
  		
  		<div class="row-fluid">
  			<div class="span6 offset3" id="100">
  				<form name="need" action="" method="post" class="form-search" >
  					<div class="needInput">
	  					<div class="input-append width100p" id="need">
		  					<input type="text" id="appendedInputButton" data-role="tagsinput" placeholder="I Need" class="search-query" />
		  					<button type="submit" class="btn"> <i class="icon-search"></i></button>
		  				</div>
		  			</div>
	  				
  				</form>
  			</div>
  		</div>
  		
  		
  		
  		
  		
  		<div id='needs' class="row-fluid width100p">
  			<div class="span6 offset3 width100p">
  				<div id='container' class="well width100p">
  					<h3>My Needs</h3>
  				</div>
  			</div>
  		</div>
  		
  		<br><br><br><br><br>
  	
</div>
</div>

</body>
</html>